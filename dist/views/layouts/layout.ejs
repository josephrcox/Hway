<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/dist/css/style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@200;300;400;500;600;700;800&display=swap" rel="stylesheet"> 

    <title class="noselect">HWay 0.2.0</title>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-SKJ9WYC7S5"></script>
    <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-SKJ9WYC7S5');
    
    </script>
    <!-- END OF Global site tag (gtag.js) - Google Analytics -->
</head>
<body>
    <div class="header">
        <div class="header_top">
            <div class="header-title noselect">
                <a href='/all'><div class="header-title cursor_pointer">HWay <span style="font-size:8px"><%= topic %></div></a>   </span>
            </div>
            
            <div class="header-notifications">
                <a href="/notifications"><div class="header-notififications-bell cursor_pointer" id="header-notifs-bell" style="display: block;"></div></a>
            </div>
            <div class="user-dropdown-div" id='user-dropdown-div'>
                <div onclick="currentuserDropdownClicked()" class="user-dropdown-button cursor_pointer" id="user-dropdown-button"><div id="currentUser" class="noselect">Login / Register</div></div>
                <div id="user-dropdown" class="user-dropdown-content">
                    <a href='/user/' id="profile_button" class="user-dropdown-item">Profile</a>
                    <a href='/logout' id="logout_button" class="user-dropdown-item">Logout</a>
                    <a href='/login'  id="login_button" class="user-dropdown-item">Login</a>
                    <a href='/register'  id="reg_button" class="user-dropdown-item">Register</a>
                    <a href='/resetpassword' id="resetpw_button" class="user-dropdown-item">Reset password</a>
                    <a href='/subscriptions' id="view_subs_button" class="user-dropdown-item">Subscriptions</a>
                    <div class="border-bottom"></div>
                    <div id="filter_nsfw_div" style="padding-inline: 7px;">
                            NSFW
                        <input type="checkbox" id="filter_nsfw" style='color:black' class="filter_nsfw"/>
                    </div>
                </div>
    
            </div>
        </div>

        
    
         <div class="header-buttons noselect">
            <a href="/home/" class="header-home cursor_pointer">Subscribed</a>
            <span id="search-button"  class="cursor_pointer">Search</span>
            <span id="subscribe-button" style='display:none;' class="cursor_pointer"></span>
            <a href="/post/" id="post-button" class="header-post cursor_pointer">Post</a>
        </div>
    </div>
    <div id="searchbar">
        <label class="np_input_label">Search for posts with...</label><input class="search_options general_input" id="search_phrase" type="text" maxlength="300" ><br/>
        <label class="np_input_label">(optionally) in the topic...</label><input class="search_options general_input" id="search_topic" type="text" maxlength="100"><br/>
        <button id="search_submit" class="button_submit">Search</button>
        <div id="search-logs"></div>
    </div>



    
    <div class='page-content'>
        <%- body %>
    </div>

    <script> 
        const header_currentUser = document.getElementById("currentUser")
        const header_dd_profile = document.getElementById("profile_button") 
        const header_dd = document.getElementById("user-dropdown")

        if (localStorage.getItem("currentUsername") != null) {
            header_currentUser.innerText = localStorage.getItem("currentUsername") + ""

            header_dd_profile.href = "/user/"+ localStorage.getItem("currentUsername")
        }

        function currentuserDropdownClicked() {
            header_dd.classList.toggle("show");
        }

        document.onclick = function(e){
            if(e.target.id !== 'currentUser'){
                if (header_dd.classList.contains('show')) {
                    header_dd.classList.remove('show');
                }
            }
        };
    </script>

<script src="/dist/scripts/frontend/main.js" type="module"></script>

</body>
</html>
